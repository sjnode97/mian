<template>
  <el-table
    class="table"
    :data="tableData"
    border
    :header-cell-style="{'text-align':'center'}"
    max-height="330"
  >
    <el-table-column
      prop="name"
      label="电站名称"
      fixed
      width="250"
      show-overflow-tooltip
      sortable
    />
    <template v-for="(power, index) in tableHead">
      <el-table-column
        :key="index"
        :prop="power"
        :label="power"
      />
    </template>
  </el-table>
</template>

<script>
import { uniqueArr } from '@/utils'
export default {
  data() {
    return {
      databases: [
        {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450,
            '11:15': 4540,
            '11:30': 130.8,
            '11:45': 3440,
            '12:00': 6450,
            '12:15': 4540,
            '12:30': 5430,
            '12:45': 3440,
            '13:00': 6450,
            '13:15': 4540,
            '13:30': 5430,
            '13:45': 3440,
            '14:00': 6450
          },
          'unit': '%',
          'name': '电站程序包电站程序包电站程序包电站程序包电站程序包'
        },
        {
          'map': {
            '08:00': 5340,
            '08:15': 8450,
            '08:30': 13450,
            '09:00': 9450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站士大夫'
        },
        {
          'map': {
            '08:00': 73450,
            '08:15': 437560,
            '08:30': 5670,
            '08:45': 75640,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '30MWp光伏电站'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }, {
          'map': {
            '08:00': 1230,
            '08:15': 4540,
            '08:30': 130.8,
            '08:45': 3440,
            '09:00': 6450,
            '09:15': 4540,
            '09:30': 5430,
            '09:45': 3440,
            '10:00': 6450,
            '10:15': 4540,
            '10:30': 5430,
            '10:45': 3440,
            '11:00': 6450
          },
          'unit': '%',
          'name': '电站程序包'
        }
      ],
      tableHead: [
        '08:00',
        '08:15',
        '08:30',
        '08:45',
        '09:00'],
      tableData: []
    }
  },

  created() {
    this.fmtData()
  },
  methods: {
    fmtData() {
      let tempHead = []
      const dataList = this.databases.map(item => {
        tempHead = [...tempHead, ...(Object.keys(item.map))]
        const obj = { ...item, ...item.map }
        delete obj.map
        return obj
      })
      this.tableData = dataList
      this.tableHead = uniqueArr(tempHead)
    }
  }
}
</script>

<style lang="scss" scoped>
  .table {
    ::v-deep {
      .el-table--medium th, .el-table--medium td {
        padding: 5px 0;
      }
    }

  }
</style>
